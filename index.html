<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PFT PERRY VALIDATION STATION</title>
    <meta name="description" content="Post Fiat Testnet Dashboard - Real-time network statistics and monitoring">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script>Chart.unregister(ChartDataLabels);</script>

    <!-- Dashboard CSS -->
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
    <!-- Splash fallback (hidden once dashboard loads) -->
    <div id="splash-fallback">
        <img src="splash.png" alt="Post Fiat Network">
    </div>

    <!-- Particle canvas background -->
    <canvas id="particle-canvas"></canvas>

    <!-- Scan lines overlay -->
    <div class="scanlines"></div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="dashboard">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1 class="glitch-text" data-text="PFT PERRY VALIDATION STATION">PFT PERRY VALIDATION STATION</h1>
            </div>
            <div class="header-right">
                <span class="live-clock" id="live-clock">00:00:00 UTC</span>
                <span class="connection-status" id="connection-status">
                    <span class="status-dot disconnected" id="status-dot"></span>
                    <span class="status-text" id="status-text">CONNECTING</span>
                </span>
            </div>
        </header>

        <!-- Row 1: Key Metric Cards -->
        <div class="section-title">
            <span class="section-title-icon">&#9670;</span>
            VALIDATOR.PFTPERRY.COM
            <span class="section-title-icon">&#9670;</span>
        </div>
        <section class="row row-metrics">
            <div class="metric-card" id="card-agreement">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="metric-label">UPTIME (24H)</div>
                <div class="metric-value" id="metric-agreement" data-target="0">--</div>
                <div class="metric-change" id="metric-agreement-change"></div>
            </div>
            <div class="metric-card" id="card-agreement-30d">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="metric-label">UPTIME (30D)</div>
                <div class="metric-value" id="metric-agreement-30d" data-target="0">--</div>
                <div class="metric-change" id="metric-agreement-30d-change"></div>
            </div>
            <div class="metric-card" id="card-missed">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="metric-label">MISSED (30D)</div>
                <div class="metric-value" id="metric-missed" data-target="0">--</div>
                <div class="metric-change" id="metric-missed-change"></div>
            </div>
            <div class="metric-card" id="card-total">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="metric-label">TOTAL VALIDATIONS (30D)</div>
                <div class="metric-value" id="metric-total" data-target="0">--</div>
                <div class="metric-change" id="metric-total-change"></div>
            </div>
        </section>

        <!-- Row 2: TX Volume + TX Type -->
        <section class="row row-charts">
            <div class="chart-panel">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="panel-header">
                    <span class="panel-title">TRANSACTION VOLUME</span>
                    <span class="panel-badge">7D</span>
                </div>
                <div class="chart-container">
                    <canvas id="chart-txvol"></canvas>
                </div>
            </div>
            <div class="chart-panel">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="panel-header">
                    <span class="panel-title">TRANSACTION TYPE DISTRIBUTION</span>
                    <span class="panel-badge">24H</span>
                </div>
                <div class="chart-container chart-container-doughnut">
                    <canvas id="chart-txtype"></canvas>
                </div>
            </div>
        </section>

        <!-- Row 3: DAW + User Retention -->
        <section class="row row-engagement">
            <div class="chart-panel">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="panel-header">
                    <span class="panel-title">DAILY ACTIVE WALLETS</span>
                    <span class="panel-badge">7 DAYS</span>
                </div>
                <div class="chart-container">
                    <canvas id="chart-daw"></canvas>
                </div>
            </div>
            <div class="chart-panel">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="panel-header">
                    <span class="panel-title">USER RETENTION</span>
                    <span class="panel-badge">7D / 30D</span>
                </div>
                <div class="chart-container">
                    <canvas id="chart-retention"></canvas>
                </div>
            </div>
        </section>

        <!-- Row 4: Live Feed + Network Topology -->
        <section class="row row-distribution">
            <div class="chart-panel live-feed-panel">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="panel-header">
                    <span class="panel-title">LIVE TRANSACTION FEED</span>
                    <span class="panel-badge pulse">LIVE</span>
                </div>
                <div class="live-feed" id="live-feed">
                    <div class="feed-placeholder">Awaiting transactions...</div>
                </div>
            </div>
            <div class="chart-panel">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="panel-header">
                    <span class="panel-title">NETWORK TOPOLOGY</span>
                </div>
                <div class="node-grid" id="node-grid">
                    <div class="node-placeholder">Loading node data...</div>
                </div>
            </div>
        </section>

        <!-- Row 5: Secondary Stats -->
        <section class="row row-secondary">
            <div class="metric-card small">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="metric-label">AVG FEE</div>
                <div class="metric-value small" id="metric-fee">--</div>
            </div>
            <div class="metric-card small">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="metric-label">LEDGER INTERVAL</div>
                <div class="metric-value small" id="metric-interval">--</div>
            </div>
            <div class="metric-card small">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="metric-label">LEDGER HEIGHT</div>
                <div class="metric-value small" id="metric-height">--</div>
            </div>
            <div class="metric-card small">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="metric-label">AVG TXN/USER</div>
                <div class="metric-value small" id="metric-txnuser">--</div>
            </div>
            <div class="metric-card small">
                <div class="card-corner tl"></div><div class="card-corner tr"></div>
                <div class="card-corner bl"></div><div class="card-corner br"></div>
                <div class="metric-label">PEAK HOUR</div>
                <div class="metric-value small" id="metric-peakhour">--</div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <span class="footer-source">Data sourced from PFT Testnet</span>
            <span class="footer-updated">Last updated: <span id="last-updated">--</span></span>
            <div class="footer-note">
                Dashboard data is collected periodically and updates approximately every 30 minutes. As data collection is ongoing, some metrics may be incomplete and will improve in accuracy over time.
            </div>
        </footer>
    </div>

    <!-- API status badge overlay -->
    <div class="api-badge hidden" id="api-badge">API CONNECTING...</div>

    <!-- Scripts -->
    <script src="js/effects.js"></script>
    <script src="js/websocket.js"></script>
    <script src="js/metrics.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
